#/bin/bash
sudo true
folder="" #Add your own folder to backup here
if [ ! -d ~/.backups ]
then
  mkdir ~/.backups
  echo "Created ~/.backups"
fi
if [ "$folder" = "" ]
then
  echo "Plesae specify project folder"
  exit
fi
base_folder=$(basename $folder)
cd $folder
if [ $(command -v gdrive) = "" ]
then
  echo "Please install gdrive from https://github.com/prasmussen/gdrive"
  echo "Then run the commmand: sudo mv gdrive* /usr/local/bin/gdrive"
  echo "To setup, run the command: gdrive about"
  exit
fi
echo "Compressing and finding id..."
sudo zip -q -r ~/.backups/$base_folder.zip *
id=`sudo gdrive list -m 1000| grep $base_folder.zip`
id=${id% $base_folder.zip*}
echo "Done"
if [ "$id" = "" ]
then
  sudo gdrive upload ~/.backups/$base_folder.zip
else
  sudo gdrive update $id ~/.backups/$base_folder.zip
fi
